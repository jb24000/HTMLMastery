<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>HTML Mastery (6-Week Sprint)</title>
<meta name="theme-color" content="#1f2a44" />
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#3b82f6"><!-- iOS Safari PWA meta tags -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="HTML Mastery">
<link rel="apple-touch-icon" href="./icons/icon-192.png">
<link rel="icon" href="data:,"> <!-- Empty favicon -->

<style>
  :root{
    /* Light blue & gray theme */
    --bg-1:#eaf2ff;           /* light blue wash */
    --bg-2:#f5f7fa;           /* light gray */
    --card:#ffffff;           /* white cards */
    --card-2:#f8fbff;         /* pale blue card */
    --border:#d5dde8;         /* cool gray border */
    --text:#1f2937;           /* slate-800 */
    --muted:#6b7280;          /* slate-500 */
    --accent:#3b82f6;         /* blue-500 */
    --accent-2:#60a5fa;       /* blue-400 */
    --ring-rest:#e5e7eb;      /* gray-200 in donut remainder */
    --good:#10b981;           /* emerald-500 */
    --warn:#f59e0b;           /* amber-500 */
    --bad:#ef4444;            /* red-500 */
    --chip:#eef2f7;
    --shadow:0 14px 40px rgba(28, 45, 90, .18);
    --shadow-soft:0 6px 20px rgba(28,45,90,.12);
  }

  html,body{height:100%}
  body{
    margin:0; color:var(--text);
    font-family: ui-sans-serif,-apple-system,Segoe UI,Roboto,Inter,Arial;
    background:
      radial-gradient(700px 500px at 0% -10%, #dbeafe 0%, transparent 60%),
      radial-gradient(900px 600px at 120% 0%, #e0ebff 0%, transparent 60%),
      linear-gradient(180deg,var(--bg-1),var(--bg-2));
  }

  .page{max-width:1000px;margin:28px auto 80px;padding:0 18px}
  .header{display:flex;align-items:center;gap:12px;font-weight:900;letter-spacing:.2px;font-size:clamp(24px,2.6vw,34px)}
  .header .badge{width:28px;height:28px;border-radius:8px;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));color:#fff;
    display:grid;place-items:center;box-shadow:0 6px 16px rgba(96,165,250,.45)}
  .sub{margin:6px 0 18px;color:var(--muted);font-size:14.5px}

  .shell{background:var(--card);border:1px solid var(--border);border-radius:26px;padding:22px;box-shadow:var(--shadow)}
  .top{display:grid;grid-template-columns:200px 1fr;gap:20px;align-items:center}
  @media (max-width:760px){.top{grid-template-columns:1fr;justify-items:center;text-align:center}}

  /* Donut */
  .circle{width:170px;height:170px;border-radius:50%;
    background: conic-gradient(var(--accent) calc(var(--pct,0)*1%), var(--ring-rest) 0);
    display:grid;place-items:center;border:10px solid #f1f5f9;box-shadow:var(--shadow-soft)}
  .circle .inner{width:130px;height:130px;border-radius:50%;background:#fbfdff;display:grid;place-items:center;font-size:28px;font-weight:900;color:#0f172a}

  .controls{display:grid;gap:14px;grid-template-columns:1fr 1fr}
  @media (max-width:560px){.controls{grid-template-columns:1fr}}
  .select{background:var(--card-2);border:1px solid var(--border);border-radius:12px;padding:10px 12px;display:flex;align-items:center;gap:10px}
  .select select{background:transparent;color:var(--text);border:none;outline:none;width:100%;font-size:15px}

  .stats{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:18px}
  .stat{background:var(--card-2);border:1px solid var(--border);border-radius:14px;padding:16px}
  .stat .k{color:var(--muted);font-size:12.5px}
  .stat .v{font-size:28px;font-weight:900;margin-top:6px;color:#0b2f6b}

  .bar{margin:18px 0 6px;display:flex;align-items:center;justify-content:space-between;gap:10px;background:#f6f9ff;border:1px solid var(--border);border-radius:14px;padding:12px}
  .btn{background:var(--chip);border:1px solid var(--border);color:var(--text);border-radius:999px;padding:10px 16px;cursor:pointer;font-weight:800}
  .btn.acc{background:linear-gradient(135deg,var(--accent),var(--accent-2));border:none;color:#ffffff}
  .btn.ghost{background:transparent}
  .btn.small{padding:8px 12px;font-size:13px}

  /* Day card with two sessions */
  .daily{margin-top:14px;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px}
  .row{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
  .h2{font-weight:900;font-size:18px}
  .nav{display:flex;gap:8px}

  .session{display:flex;gap:12px;margin-top:14px}
  .check{min-width:20px;height:20px;border-radius:50%;border:2px solid var(--muted);margin-top:3px;cursor:pointer;transition:transform .1s ease}
  .check:hover{transform:scale(1.06)}
  .check.done{background:linear-gradient(135deg,var(--good),#87f3c7);border-color:transparent;box-shadow:0 0 0 3px #eafff6}

  .s-wrap{flex:1}
  .title{font-weight:900;color:#0b2447}
  .meta{color:var(--muted);font-size:12.5px;margin:4px 0 2px}
  .desc{color:#384253}

  .panel{background:#f6f9ff;border:1px dashed var(--border);border-radius:12px;padding:12px;margin:10px 0 0}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width:700px){.grid2{grid-template-columns:1fr}}
  .panel .k{color:var(--muted);font-size:12px}
  .panel .v{font-weight:800;margin-top:2px}

  /* Tags/links */
  .tags{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 0}
  .tag{background:#eaf3ff;color:#0b2f6b;border:1px solid #cfe2ff;padding:6px 10px;border-radius:999px;font-weight:800;font-size:12px;text-decoration:none}
  .tag:hover{filter:brightness(1.06)}

  /* Ensure links are always clickable even if parent has handlers */
  .daily a{position:relative;z-index:3}
</style>
</head>
<body>
  <div class="page">
    <div class="header">
      <div class="badge">‚åÅ</div>
      HTML Mastery ‚Äî 6-Week Sprint
    </div>
    <div class="sub">
      Fully immersive path from fundamentals to <strong>supervisory-level HTML leadership</strong> (a11y, forms, media, performance, SEO, reviews, governance, and mentoring).
    </div>

    <div class="shell">
      <div class="top">
        <!-- Progress donut -->
        <div class="circle" id="donut" style="--pct:0"><div class="inner" id="donutPct">0%</div></div>

        <div>
          <div class="controls">
            <div class="select">
              <span style="font-weight:800;color:#0b2f6b">Mode</span>
              <select id="mode">
                <option>Guided Sprint (6 weeks)</option>
                <option>Free Study</option>
              </select>
            </div>
            <div class="select">
              <span style="font-weight:800;color:#0b2f6b">Track</span>
              <select id="track">
                <option value="full">Full Track (6 weeks)</option>
                <option value="fast">Fast Track (4 weeks)</option>
              </select>
            </div>
          </div>

          <div class="stats">
            <div class="stat">
              <div class="k">Day Streak</div>
              <div class="v" id="streak">0</div>
            </div>
            <div class="stat">
              <div class="k">Sessions Completed</div>
              <div class="v"><span id="done">0</span> / <span id="total">0</span></div>
            </div>
          </div>

          <div class="bar">
            <div class="muted">üîî Enable notifications for daily reminders</div>
            <div>
              <button class="btn acc" id="enableAlerts">Enable Alerts</button>
              <button class="btn ghost" id="reset">Reset</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Day card -->
      <div class="daily" id="dayCard">
        <div class="row">
          <div class="h2" id="dayTitle">Day 1 of 42 ‚Äî Week 1: Foundations</div>
          <div class="nav">
            <button class="btn small" id="prev">‚Üê Prev</button>
            <button class="btn small" id="next">Next ‚Üí</button>
          </div>
        </div>

        <!-- session A -->
        <div class="session">
          <div class="check" id="s0" title="Mark session complete"></div>
          <div class="s-wrap">
            <div class="title" id="s0_title">Document mental model & HTML anatomy</div>
            <div class="meta" id="s0_slot">Morning (45m) ‚Ä¢ üß± Foundations</div>
            <div class="desc" id="s0_desc">Build an intuition for tags, attributes, DOM, and content flow.</div>
            <div class="panel grid2">
              <div>
                <div class="k">What you learned</div>
                <div class="v" id="s0_learned">DOM, elements, semantics</div>
              </div>
              <div>
                <div class="k">What you did</div>
                <div class="v" id="s0_did">Skeleton page; headings; paragraphs; lists</div>
              </div>
              <div>
                <div class="k">AWS tie-in</div>
                <div class="v" id="s0_aws">Static hosting on S3/CloudFront benefits from clean semantics</div>
              </div>
              <div>
                <div class="k">Resume bullet</div>
                <div class="v" id="s0_bullet">‚Äî</div>
              </div>
            </div>
            <div class="tags" id="s0_links"></div>
            <div class="tags">
              <button class="btn small" data-copy="s0">Copy Resume Bullet</button>
            </div>
          </div>
        </div>

        <!-- session B -->
        <div class="session">
          <div class="check" id="s1" title="Mark session complete"></div>
          <div class="s-wrap">
            <div class="title" id="s1_title">Semantic layout & landmarks</div>
            <div class="meta" id="s1_slot">Evening (45m) ‚Ä¢ üß≠ Semantics</div>
            <div class="desc" id="s1_desc">header/nav/main/aside/footer, skip links, and screen-reader landmarks.</div>
            <div class="panel grid2">
              <div>
                <div class="k">What you learned</div>
                <div class="v" id="s1_learned">Landmarks, navigation patterns</div>
              </div>
              <div>
                <div class="k">What you did</div>
                <div class="v" id="s1_did">Implemented skeleton with accessible nav & skip-to-main</div>
              </div>
              <div>
                <div class="k">AWS tie-in</div>
                <div class="v" id="s1_aws">Boosts Lighthouse & SEO for CloudFront-served pages</div>
              </div>
              <div>
                <div class="k">Resume bullet</div>
                <div class="v" id="s1_bullet">‚Äî</div>
              </div>
            </div>
            <div class="tags" id="s1_links"></div>
            <div class="tags">
              <button class="btn small" data-copy="s1">Copy Resume Bullet</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Free study day picker -->
      <div class="daily" id="picker" style="display:none">
        <div class="h2" style="margin-bottom:8px">Jump to a day</div>
        <div id="grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(90px,1fr));gap:10px"></div>
      </div>

    </div>
  </div>

<script>
/* ---------- Core UI helpers ---------- */
const $ = sel => document.querySelector(sel);
const els = {
  donut: $('#donut'), donutPct: $('#donutPct'),
  mode: $('#mode'), track: $('#track'),
  streak: $('#streak'), done: $('#done'), total: $('#total'),
  enableAlerts: $('#enableAlerts'), reset: $('#reset'),
  dayTitle: $('#dayTitle'), prev: $('#prev'), next: $('#next'),
  dayCard: $('#dayCard'), picker: $('#picker'), grid: $('#grid'),
  s: [
    {check:$('#s0'), t:$('#s0_title'), slot:$('#s0_slot'), d:$('#s0_desc'),
     learned:$('#s0_learned'), did:$('#s0_did'), aws:$('#s0_aws'), bullet:$('#s0_bullet'), links:$('#s0_links')},
    {check:$('#s1'), t:$('#s1_title'), slot:$('#s1_slot'), d:$('#s1_desc'),
     learned:$('#s1_learned'), did:$('#s1_did'), aws:$('#s1_aws'), bullet:$('#s1_bullet'), links:$('#s1_links')}
  ]
};

/* Keep anchors clickable even if parents have handlers */
document.addEventListener('click', (e)=>{
  const a = e.target.closest('a[href]');
  if (!a) return;
  e.stopImmediatePropagation();
}, true);

/* ---------- Curriculum (6 weeks = 42 days, 2 sessions/day) ---------- */
/* Helpers */
const MDN = {
  elements: "https://developer.mozilla.org/en-US/docs/Web/HTML/Element",
  semantics: "https://developer.mozilla.org/en-US/docs/Glossary/Semantics#semantics_in_html",
  forms: "https://developer.mozilla.org/en-US/docs/Learn/Forms",
  validation: "https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation",
  inputs: "https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input",
  a11y: "https://developer.mozilla.org/en-US/docs/Learn/Accessibility",
  aria: "https://www.w3.org/TR/wai-aria-1.2/",
  tables: "https://developer.mozilla.org/en-US/docs/Learn/HTML/Tables/Basics",
  media: "https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding",
  picture: "https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture",
  video: "https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video",
  audio: "https://developer.mozilla.org/en-US/docs/Web/HTML/Element/audio",
  svg: "https://developer.mozilla.org/en-US/docs/Web/SVG",
  images: "https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images",
  perfHints: "https://web.dev/learn/performance/resource-hints/",
  meta: "https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta",
  seo: "https://developers.google.com/search/docs/fundamentals/seo-starter-guide",
  structured: "https://developers.google.com/search/docs/appearance/structured-data/intro-structured-data",
  formsAPI: "https://developer.mozilla.org/en-US/docs/Web/API/Constraint_validation",
  dialog: "https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog"
};
const DAYS = [];
function day(title, A, B){DAYS.push({title, sessions:[A,B]})}
function S({slot, tag, title, desc, learned, did, aws, resume, links}){return {slot,tag,title,desc,learned,did,aws,resume,links}}

/* ---- Week 1: Foundations & Semantics ---- */
day("Week 1: Foundations",
  S({slot:"Morning (45m)", tag:"Foundations", title:"Document mental model & HTML anatomy",
     desc:"Tags, attributes, DOM, content flow. Build a tiny but complete page.",
     learned:"DOM structure, elements, attributes",
     did:"Created skeleton page, headings/paragraphs/lists",
     aws:"Clean semantics render well via S3/CloudFront static hosting",
     resume:"Built semantic HTML skeletons aligned with WCAG & SEO best practices.",
     links:[{label:"MDN Elements",url:MDN.elements},{label:"Semantics",url:MDN.semantics}]}),
  S({slot:"Evening (45m)", tag:"Semantics", title:"Semantic layout & landmarks",
     desc:"header/nav/main/aside/footer; skip links; verify landmarks in SR.",
     learned:"Landmarks, navigation regions",
     did:"Added nav & skip-to-main, validated with SR",
     aws:"Improves Core Web Vitals when served via CloudFront",
     resume:"Delivered accessible page structures with landmark navigation and skip links.",
     links:[{label:"Semantics in HTML",url:MDN.semantics},{label:"ARIA (landmarks)",url:MDN.aria}]})
);
/* 2 */
day("Week 1: Text, Links & Images",
  S({slot:"Morning (45m)", tag:"Text", title:"Headings, paragraphs, inline semantics",
     desc:"strong/em/emphasis, code/kbd, quotations & citations.",
     learned:"Inline semantics & proper hierarchy",
     did:"Refactored copy to meaningful inline tags",
     aws:"Search relevance/preview improves for static sites",
     resume:"Elevated content semantics‚Äîheadings, inline roles‚Äîto boost readability & SEO.",
     links:[{label:"MDN Elements",url:MDN.elements}]}),
  S({slot:"Evening (45m)", tag:"Media", title:"Images & alt strategy",
     desc:"Figure/figcaption, alt text taxonomy, lazy-loading, width/height.",
     learned:"Accessible & performant images",
     did:"Added alt, dimensions, lazy, captions",
     aws:"CloudFront + responsive images reduce bytes & CLS",
     resume:"Implemented image accessibility and lazy-loading to cut bytes and improve CLS.",
     links:[{label:"Responsive images",url:MDN.images}]})
);
/* 3 */
day("Week 1: Lists & Tables",
  S({slot:"Morning (45m)", tag:"Lists", title:"Lists for structure",
     desc:"ul/ol/dl; when to use which; nested lists & styling hooks.",
     learned:"Structured grouping with lists",
     did:"Converted ad-hoc blocks to semantic lists",
     aws:"More predictable rendering on static pages",
     resume:"Rewrote content blocks into semantic lists for clarity and accessibility.",
     links:[{label:"MDN Elements",url:MDN.elements}]}),
  S({slot:"Evening (60m)", tag:"Tables", title:"Accessible data tables",
     desc:"caption, thead/tbody/tfoot, scope/id-headers, responsive approaches.",
     learned:"Tabular semantics & associations",
     did:"Built accessible table patterns",
     aws:"Static dashboards remain usable without JS",
     resume:"Delivered WCAG-compliant data tables (headers, scope, caption).",
     links:[{label:"MDN Tables",url:MDN.tables}]})
);
/* 4 */
day("Week 1: Navigation Patterns",
  S({slot:"Morning (45m)", tag:"Nav", title:"Site nav & breadcrumbs",
     desc:"Multiple nav regions, aria-current, breadcrumb list semantics.",
     learned:"Robust nav patterns",
     did:"Added aria-current & breadcrumbs",
     aws:"Better crawlability for CloudFront sites",
     resume:"Implemented multi-nav with aria-current and breadcrumb semantics.",
     links:[{label:"Semantics",url:MDN.semantics}]}),
  S({slot:"Evening (45m)", tag:"Footer", title:"Footers & legal",
     desc:"Footer structure, contact links, meta, to-top link.",
     learned:"Footer patterns",
     did:"Composed global footer w/ legal & contact",
     aws:"Consistent template across S3 buckets",
     resume:"Standardized global footers with clear contact and legal sections.",
     links:[{label:"MDN Elements",url:MDN.elements}]})
);
/* 5 */
day("Week 1: Accessibility Primer",
  S({slot:"Morning (60m)", tag:"a11y", title:"A11y fundamentals",
     desc:"Perceivable/Operable/Understandable/Robust, focus order, names.",
     learned:"WCAG pillars, name/role/value",
     did:"Manual keyboard audit & fixes",
     aws:"Accessible static sites reduce bounce rates",
     resume:"Performed keyboard/a11y audits and corrected focus and names.",
     links:[{label:"MDN Accessibility",url:MDN.a11y}]}),
  S({slot:"Evening (45m)", tag:"Dialog", title:"Native <dialog> for modals",
     desc:"showModal/close, inert background, focus management.",
     learned:"Dialog semantics without heavy JS",
     did:"Replaced custom modal with <dialog>",
     aws:"Lean HTML improves TTFB at edge",
     resume:"Replaced custom modals with accessible native <dialog> components.",
     links:[{label:"MDN <dialog>",url:MDN.dialog}]})
);
/* 6 */
day("Week 1: Review & Quiz",
  S({slot:"Morning (30m)", tag:"Review", title:"Landmarks & text semantics quick-check",
     desc:"Self-audit existing pages; fix 3 issues.",
     learned:"Applied semantics at scale",
     did:"Submitted audit notes & PR",
     aws:"Stronger templates for S3 static sites",
     resume:"Led semantic audit and shipped fixes across templates.",
     links:[{label:"MDN Elements",url:MDN.elements}]}),
  S({slot:"Evening (30m)", tag:"Quiz", title:"Foundations checkpoint",
     desc:"Short quiz + reflection log.",
     learned:"Validated core concepts",
     did:"Passed quiz; logged follow-ups",
     aws:"‚Äî",
     resume:"Maintained study logs and checkpoints to track mastery.",
     links:[]})
);
/* 7 */
day("Week 1: Project Day",
  S({slot:"Morning (90m)", tag:"Build", title:"Mini-site v1",
     desc:"2-page site with nav, images, table.",
     learned:"End-to-end semantic build",
     did:"Deployed mini-site locally",
     aws:"Ready for S3/CloudFront deploy",
     resume:"Built a semantic mini-site with nav, images, and data tables.",
     links:[{label:"Semantics",url:MDN.semantics}]}),
  S({slot:"Evening (30m)", tag:"Polish", title:"Content QA",
     desc:"Proofread, alt review, heading levels.",
     learned:"Editorial QA",
     did:"Fixed alt & heading issues",
     aws:"‚Äî",
     resume:"Drove editorial QA on headings/alt for consistency.",
     links:[]})
);

/* ---- Week 2: Forms & Validation ---- */
day("Week 2: Forms Basics",
  S({slot:"Morning (60m)", tag:"Forms", title:"Form anatomy",
     desc:"form, label/for, fieldset/legend, required/optional.",
     learned:"Accessible form structure",
     did:"Signup form with labels & legends",
     aws:"Better conversion on CloudFront landers",
     resume:"Designed accessible forms with labels, groups, and clear affordances.",
     links:[{label:"MDN Forms",url:MDN.forms}]}),
  S({slot:"Evening (60m)", tag:"Inputs", title:"Input types & attributes",
     desc:"email/url/tel/number/date; placeholder vs label; help/error text.",
     learned:"Right input for the job",
     did:"Refactored inputs to proper types",
     aws:"Native keyboards on mobile increase completion",
     resume:"Mapped inputs to semantic types to reduce friction on mobile.",
     links:[{label:"MDN input",url:MDN.inputs}]})
);
/* 9 */
day("Week 2: Validation I",
  S({slot:"Morning (60m)", tag:"Validation", title:"Constraint validation (native)",
     desc:"required, pattern, min/max/len, validity UI.",
     learned:"HTML validation attributes",
     did:"Added constraints + messages",
     aws:"Less JS = lower bytes at edge",
     resume:"Implemented native HTML validation with clear inline messaging.",
     links:[{label:"Forms validation",url:MDN.validation}]}),
  S({slot:"Evening (60m)", tag:"Validation", title:"Constraint Validation API",
     desc:"checkValidity/reportValidity/setCustomValidity.",
     learned:"Programmatic validation",
     did:"Custom messages + aria-live",
     aws:"Graceful enhancement for static pages",
     resume:"Leveraged the Constraint Validation API with accessible error handling.",
     links:[{label:"Constraint Validation API",url:MDN.formsAPI}]})
);
/* 10 */
day("Week 2: Complex Forms",
  S({slot:"Morning (60m)", tag:"UX", title:"Grouping, hints & errors",
     desc:"helper text, aria-describedby, error summary pattern.",
     learned:"Clear guidance & error handling",
     did:"Added error summary & hints",
     aws:"Reduced support on forms hosted in S3",
     resume:"Introduced error summaries and helpful hints for complex forms.",
     links:[{label:"MDN Forms",url:MDN.forms}]}),
  S({slot:"Evening (45m)", tag:"File", title:"File inputs & accessibility",
     desc:"accept/multiple/capture; progress patterns w/o JS.",
     learned:"Usable uploads",
     did:"Accessible file upload with labels",
     aws:"Static presign UI for S3 uploads",
     resume:"Delivered accessible file upload experiences with clear affordances.",
     links:[{label:"MDN input",url:MDN.inputs}]})
);
/* 11 */
day("Week 2: Search & Filters",
  S({slot:"Morning (45m)", tag:"Search", title:"Search form semantics",
     desc:"role=search, search inputs, submit/reset behavior.",
     learned:"Discoverability patterns",
     did:"Search box with label & SR text",
     aws:"Improves site search UX on static docs",
     resume:"Implemented accessible search with semantic form controls.",
     links:[{label:"MDN Elements",url:MDN.elements}]}),
  S({slot:"Evening (45m)", tag:"Patterns", title:"Filter groups & radios/checkboxes",
     desc:"fieldset/legend for filters; keyboard order.",
     learned:"Filter semantics",
     did:"Built filter UI with legends",
     aws:"Static e-commerce pages benefit too",
     resume:"Built structured filter groups using fieldset/legend semantics.",
     links:[{label:"MDN Forms",url:MDN.forms}]})
);
/* 12 */
day("Week 2: Review + Mini-Project",
  S({slot:"Morning (90m)", tag:"Build", title:"Form-heavy page",
     desc:"Contact + signup; validation + hints.",
     learned:"End-to-end form design",
     did:"Built & validated complex form",
     aws:"Ready for S3 backends or presigned posts",
     resume:"Delivered an accessible, validated multi-section form.",
     links:[{label:"Forms validation",url:MDN.validation}]}),
  S({slot:"Evening (30m)", tag:"Polish", title:"Accessibility audit",
     desc:"Keyboard nav, names/roles, error handling.",
     learned:"a11y QA",
     did:"Fixed 3 a11y issues",
     aws:"‚Äî",
     resume:"Ran accessibility QA and shipped fixes.",
     links:[{label:"MDN a11y",url:MDN.a11y}]})
);
/* 13 */
day("Week 2: Forms Quiz + Reflection",
  S({slot:"Morning (30m)", tag:"Quiz", title:"Forms checkpoint",
     desc:"Short quiz; capture weak spots.",
     learned:"Gaps identified",
     did:"Logged follow-ups",
     aws:"‚Äî",
     resume:"Maintained structured learning logs and improvement actions.",
     links:[]}),
  S({slot:"Evening (30m)", tag:"Read", title:"Docs dive",
     desc:"Re-read MDN sections you missed.",
     learned:"Reinforcement",
     did:"Summarized notes",
     aws:"‚Äî",
     resume:"Consolidated documentation notes and action items.",
     links:[{label:"MDN Forms",url:MDN.forms}]})
);
/* 14 */
day("Week 2: Project Shipping",
  S({slot:"Morning (60m)", tag:"Ship", title:"Deploy form demo",
     desc:"Validated forms + thank-you.",
     learned:"Packaging & deploy",
     did:"Deployed to local/Pages",
     aws:"Ready for S3/CloudFront",
     resume:"Shipped a validated, accessible form demo.",
     links:[{label:"MDN Meta",url:MDN.meta}]}),
  S({slot:"Evening (30m)", tag:"Retrospective", title:"Team review",
     desc:"Write a README and review checklist.",
     learned:"Review process",
     did:"Created code review checklist",
     aws:"Supervisory practice",
     resume:"Authored HTML review checklist for team adoption.",
     links:[]})
);

/* ---- Week 3: Media & Graphics ---- */
day("Week 3: Responsive Images",
  S({slot:"Morning (60m)", tag:"Images", title:"srcset/sizes & <picture>",
     desc:"Art direction, DPR, fallback, width/height to fight CLS.",
     learned:"Responsive image pipeline",
     did:"Converted images to srcset/picture",
     aws:"Smaller bytes through CloudFront",
     resume:"Implemented responsive images with <picture> and srcset.",
     links:[{label:"Responsive images",url:MDN.images},{label:"<picture>",url:MDN.picture}]}),
  S({slot:"Evening (45m)", tag:"Perf", title:"Lazy-loading & decoding",
     desc:"loading=lazy, fetchpriority, decoding=async.",
     learned:"Perceived performance",
     did:"Added lazy/priority hints",
     aws:"Edge delivery efficiency",
     resume:"Optimized image loading via lazy/priority/decoding attributes.",
     links:[{label:"Resource hints",url:MDN.perfHints}]})
);
/* 16 */
day("Week 3: Video & Audio",
  S({slot:"Morning (60m)", tag:"Media", title:"<video> with captions",
     desc:"tracks, kind=captions/subtitles, poster, controlslist.",
     learned:"Accessible video",
     did:"Added VTT tracks & poster",
     aws:"Media on CloudFront w/ captions",
     resume:"Delivered accessible video with caption tracks and proper controls.",
     links:[{label:"MDN video",url:MDN.video}]}),
  S({slot:"Evening (45m)", tag:"Audio", title:"<audio> best practices",
     desc:"transcripts, controls, preload.",
     learned:"Inclusive audio",
     did:"Provided transcript & preload",
     aws:"Better UX for docs & podcasts",
     resume:"Shipped accessible audio players with transcripts.",
     links:[{label:"MDN audio",url:MDN.audio}]})
);
/* 17 */
day("Week 3: SVG Essentials",
  S({slot:"Morning (60m)", tag:"SVG", title:"Inline SVG for icons/illustrations",
     desc:"title/desc, focusability, <use>, viewBox/preserveAspectRatio.",
     learned:"Sharp, accessible graphics",
     did:"Replaced PNG icons with inline SVG",
     aws:"Fewer requests via sprites",
     resume:"Migrated to accessible inline SVG icon system.",
     links:[{label:"MDN SVG",url:MDN.svg}]}),
  S({slot:"Evening (45m)", tag:"SVG", title:"SVG and text/ARIA",
     desc:"labelling techniques, roles, fallbacks.",
     learned:"Screen reader compatibility",
     did:"Added titles/roles in SVG",
     aws:"‚Äî",
     resume:"Hardened SVG accessibility with proper roles/titles.",
     links:[{label:"MDN SVG",url:MDN.svg}]})
);
/* 18 */
day("Week 3: Embeds & IFrames",
  S({slot:"Morning (45m)", tag:"Embed", title:"<iframe> & sandbox",
     desc:"title, sandbox, loading=lazy, allow attributes.",
     learned:"Safe embeds",
     did:"Hardened embeds w/ sandbox",
     aws:"Security on public docs",
     resume:"Hardened iframes with sandbox, titles, and lazy loading.",
     links:[{label:"MDN Elements",url:MDN.elements}]}),
  S({slot:"Evening (45m)", tag:"Meta", title:"Favicons & meta",
     desc:"icons, theme-color, viewport, social sharing meta.",
     learned:"Polished head metadata",
     did:"Added favicons & OG/Twitter meta",
     aws:"Better social previews for product pages",
     resume:"Standardized head metadata and social cards.",
     links:[{label:"MDN meta",url:MDN.meta}]})
);
/* 19 */
day("Week 3: Review & Shipping",
  S({slot:"Morning (90m)", tag:"Build", title:"Media-rich page",
     desc:"Images, video w/ captions, audio w/ transcript.",
     learned:"End-to-end media",
     did:"Shipped media-rich demo",
     aws:"Edge-optimized via CloudFront",
     resume:"Built an accessible, media-rich page with captions/transcripts.",
     links:[{label:"Media & Embedding",url:MDN.media}]}),
  S({slot:"Evening (30m)", tag:"Polish", title:"A11y/perf review",
     desc:"Check captions, lazy images, sizes attributes.",
     learned:"QA cycles",
     did:"Fixed media regressions",
     aws:"‚Äî",
     resume:"Ran targeted QA for media accessibility and performance.",
     links:[]})
);

/* ---- Week 4: Performance & SEO ---- */
day("Week 4: Resource Hints",
  S({slot:"Morning (45m)", tag:"Perf", title:"preconnect/dns-prefetch/preload",
     desc:"Use hints to warm connections and load critical assets.",
     learned:"Network warm-up & critical path",
     did:"Added preconnect/preload for key assets",
     aws:"Edge caches warm faster",
     resume:"Optimized loading via preconnect/preload resource hints.",
     links:[{label:"Resource Hints",url:MDN.perfHints}]}),
  S({slot:"Evening (45m)", tag:"Perf", title:"Defer non-critical work",
     desc:"defer/async scripts, blocking elements, order.",
     learned:"Minimize main-thread block",
     did:"Reordered scripts & attributes",
     aws:"Faster TTFB/TTI via CloudFront",
     resume:"Reduced render-blocking by deferring non-critical resources.",
     links:[{label:"MDN Elements",url:MDN.elements}]})
);
/* 21 */
day("Week 4: SEO & Metadata",
  S({slot:"Morning (60m)", tag:"SEO", title:"Head tags that matter",
     desc:"title/description, canonical, robots, language.",
     learned:"Search-friendly HTML",
     did:"Wrote meta/robots/canonical",
     aws:"Better discoverability for docs",
     resume:"Authored SEO-critical head tags for clarity and crawlability.",
     links:[{label:"SEO Starter",url:MDN.seo},{label:"MDN meta",url:MDN.meta}]}),
  S({slot:"Evening (60m)", tag:"SEO", title:"Structured data (JSON-LD)",
     desc:"Organization/Breadcrumb/Article schemas.",
     learned:"Rich results readiness",
     did:"Added JSON-LD to sample pages",
     aws:"Product/Docs previews improve CTR",
     resume:"Implemented JSON-LD structured data for rich results.",
     links:[{label:"Structured Data",url:MDN.structured}]})
);
/* 22 */
day("Week 4: Sitemaps & Robots",
  S({slot:"Morning (45m)", tag:"SEO", title:"Sitemaps & robots.txt",
     desc:"Index control, disallow patterns, canonicals interplay.",
     learned:"Crawl management",
     did:"Drafted sitemap & robots",
     aws:"Static sites easier to manage",
     resume:"Created sitemap/robots configuration for static sites.",
     links:[{label:"SEO Starter",url:MDN.seo}]}),
  S({slot:"Evening (45m)", tag:"Perf", title:"Core Web Vitals & HTML",
     desc:"LCP, CLS, INP‚Äîwhat HTML can influence.",
     learned:"Vitals levers in HTML",
     did:"Set sizes, lazy, priority on media",
     aws:"CWV uplifts via HTML attributes",
     resume:"Improved CWV via sizes, lazy-loading, and priority hints.",
     links:[{label:"Resource Hints",url:MDN.perfHints}]})
);
/* 23 */
day("Week 4: Review + Project",
  S({slot:"Morning (90m)", tag:"Build", title:"SEO/perf passes on mini-site",
     desc:"Apply head tags, JSON-LD, hints, lazy.",
     learned:"Holistic improvements",
     did:"Reduced bytes and improved CWV",
     aws:"Edge delivery shines",
     resume:"Audited and uplifted SEO & performance across pages.",
     links:[{label:"SEO Starter",url:MDN.seo}]}),
  S({slot:"Evening (30m)", tag:"Docs", title:"Document the checklist",
     desc:"Create a repeatable HTML review checklist.",
     learned:"Team enablement",
     did:"Published checklist in README",
     aws:"Supervisory artefact",
     resume:"Published an HTML review checklist adopted by the team.",
     links:[]})
);

/* ---- Week 5: Architecture & Supervision ---- */
day("Week 5: Component Playbook",
  S({slot:"Morning (60m)", tag:"Patterns", title:"Reusable HTML patterns",
     desc:"Cards, media blocks, content lists, dialog patterns.",
     learned:"Pattern library mindset",
     did:"Codified 6 patterns in HTML",
     aws:"Consistent static templates",
     resume:"Codified reusable HTML patterns (cards/tables/dialogs).",
     links:[{label:"MDN Elements",url:MDN.elements}]}),
  S({slot:"Evening (60m)", tag:"Docs", title:"Usage guidelines",
     desc:"When to use which tag, anti-patterns, a11y notes.",
     learned:"Guardrails & governance",
     did:"Wrote usage docs",
     aws:"Enables wider team",
     resume:"Wrote usage guidelines for patterns with a11y notes.",
     links:[]})
);
/* 25 */
day("Week 5: Code Reviews",
  S({slot:"Morning (45m)", tag:"Review", title:"HTML review techniques",
     desc:"Diff reading, a11y sniff tests, semantic checks.",
     learned:"Reviewer toolkit",
     did:"Reviewed 2 PRs with checklist",
     aws:"Raises baseline quality",
     resume:"Performed structured HTML reviews using a team checklist.",
     links:[{label:"MDN a11y",url:MDN.a11y}]}),
  S({slot:"Evening (45m)", tag:"Mentor", title:"Review feedback craft",
     desc:"Actionable feedback, coaching tone, examples.",
     learned:"Supervisory communication",
     did:"Wrote exemplar feedback",
     aws:"Team velocity ‚Üë",
     resume:"Delivered actionable, empathetic code-review feedback.",
     links:[]})
);
/* 26 */
day("Week 5: Docs & Demos",
  S({slot:"Morning (60m)", tag:"Docs", title:"README + examples",
     desc:"Self-contained examples for each pattern.",
     learned:"Communication via examples",
     did:"Committed examples folder",
     aws:"Easier onboarding",
     resume:"Documented HTML patterns with runnable examples.",
     links:[]}),
  S({slot:"Evening (60m)", tag:"Workshop", title:"Internal workshop",
     desc:"Run a 30-min walkthrough with Q&A.",
     learned:"Teaching & leadership",
     did:"Hosted workshop & captured feedback",
     aws:"Amplifies adoption",
     resume:"Facilitated an internal HTML patterns workshop.",
     links:[]})
);
/* 27 */
day("Week 5: QA Systems",
  S({slot:"Morning (45m)", tag:"QA", title:"Manual QA rubric",
     desc:"Checklist for structure, a11y, media, forms.",
     learned:"Repeatable QA",
     did:"Added QA rubric to repo",
     aws:"Production readiness",
     resume:"Created a repeatable QA rubric for HTML deliverables.",
     links:[]}),
  S({slot:"Evening (45m)", tag:"Govern", title:"Governance hooks",
     desc:"PR templates, ISSUE templates, definition of done.",
     learned:"Process & governance",
     did:"Added PR/ISSUE templates",
     aws:"Scales reviews",
     resume:"Introduced PR/issue templates and DoD for HTML work.",
     links:[]})
);

/* ---- Week 6: Capstone & Leadership ---- */
day("Week 6: Capstone Planning",
  S({slot:"Morning (60m)", tag:"Plan", title:"Define capstone",
     desc:"Choose a content site, set success metrics.",
     learned:"Scoping & metrics",
     did:"Wrote capstone plan",
     aws:"Host via S3/CloudFront",
     resume:"Scoped a capstone project with measurable outcomes.",
     links:[]}),
  S({slot:"Evening (60m)", tag:"Design", title:"Information architecture",
     desc:"Sitemap, nav, breadcrumbs, URL scheme.",
     learned:"IA foundations",
     did:"Drafted site map & nav models",
     aws:"SEO & UX foundations",
     resume:"Designed IA with sitemap/nav/breadcrumbs.",
     links:[]})
);
day("Week 6: Capstone Build I",
  S({slot:"Morning (90m)", tag:"Build", title:"Build structure & pages",
     desc:"Lay out base templates and pages.",
     learned:"Assembly at scale",
     did:"Built 6+ pages & base layout",
     aws:"Ready for deployment",
     resume:"Assembled a multi-page site with semantic templates.",
     links:[{label:"Semantics",url:MDN.semantics}]}),
  S({slot:"Evening (45m)", tag:"Media", title:"Add media correctly",
     desc:"Responsive images + captions + transcripts.",
     learned:"Media excellence",
     did:"Integrated responsive media assets",
     aws:"Bytes down, quality up",
     resume:"Integrated responsive media with captions/transcripts.",
     links:[{label:"Media",url:MDN.media}]})
);
day("Week 6: Capstone Build II",
  S({slot:"Morning (60m)", tag:"Forms", title:"Add forms w/ validation",
     desc:"Accessible fields, constraints, summaries.",
     learned:"Robust forms",
     did:"Shipped validated forms",
     aws:"Conversion-friendly forms",
     resume:"Delivered accessible, validated forms for the site.",
     links:[{label:"Forms",url:MDN.forms}]}),
  S({slot:"Evening (45m)", tag:"Meta", title:"Head, SEO & JSON-LD",
     desc:"Titles, descriptions, canonicals, structured data.",
     learned:"Search readiness",
     did:"Added JSON-LD & meta",
     aws:"Rich results & preview",
     resume:"Implemented SEO meta & JSON-LD across pages.",
     links:[{label:"Structured Data",url:MDN.structured}]})
);
day("Week 6: Performance Pass",
  S({slot:"Morning (45m)", tag:"Perf", title:"Hints & priorities",
     desc:"Preconnect/preload, lazy, sizes, decoding.",
     learned:"CWV levers",
     did:"Perf pass completed",
     aws:"Edge delivery optimized",
     resume:"Optimized loading with resource hints and media priorities.",
     links:[{label:"Hints",url:MDN.perfHints}]}),
  S({slot:"Evening (45m)", tag:"Audit", title:"A11y & keyboard QA",
     desc:"Landmarks, focus, names/roles/values.",
     learned:"Accessibility leadership",
     did:"Logged & fixed issues",
     aws:"Inclusive by default",
     resume:"Led a11y audits and fixes across the capstone.",
     links:[{label:"MDN a11y",url:MDN.a11y}]})
);
day("Week 6: Review & Docs",
  S({slot:"Morning (60m)", tag:"Review", title:"Peer reviews",
     desc:"Run 2 structured reviews with checklist.",
     learned:"Supervisory review",
     did:"Reviewed peers & merged PRs",
     aws:"Quality gate",
     resume:"Conducted structured HTML reviews and merged PRs.",
     links:[]}),
  S({slot:"Evening (60m)", tag:"Docs", title:"Hand-off package",
     desc:"README, review checklist, QA rubric.",
     learned:"Maintainability",
     did:"Published hand-off docs",
     aws:"Sustainable ops",
     resume:"Published hand-off docs enabling team self-service.",
     links:[]})
);
day("Week 6: Present & Ship",
  S({slot:"Morning (45m)", tag:"Present", title:"Capstone presentation",
     desc:"Tell the story: baseline ‚Üí impact; demo.",
     learned:"Executive communication",
     did:"Presented to stakeholders",
     aws:"‚Äî",
     resume:"Presented HTML capstone; articulated business impact.",
     links:[]}),
  S({slot:"Evening (45m)", tag:"Ship", title:"Deploy & retro",
     desc:"Deploy to chosen hosting; log lessons.",
     learned:"Shipping discipline",
     did:"Deployed & wrote retro",
     aws:"S3/CloudFront or static hosting",
     resume:"Deployed capstone and ran a blameless retrospective.",
     links:[]})
);

/* ---------- State ---------- */
const KEY = 'htmlMastery_blue_v1';
let state = JSON.parse(localStorage.getItem(KEY) || '{}');
if (typeof state.idx!=='number') state.idx = 0;
if (!state.done) state.done = {};   // key: `${dayIndex}.${sessionIndex}`
if (!state.streak) state.streak = 0;
if (!state.last) state.last = null;

function save(){ localStorage.setItem(KEY, JSON.stringify(state)); }
function sessionsTotal(){ return DAYS.length * 2; }
function sessionsDone(){ return Object.keys(state.done).length; }
function pct(n){ return Math.round(n*100); }

function setDonut(){
  const d = sessionsDone(), t = sessionsTotal();
  const p = t? d/t : 0;
  $('#done').textContent = d; $('#total').textContent = t;
  $('#donutPct').textContent = `${pct(p)}%`;
  $('#donut').style.setProperty('--pct', p*100);
}

function renderDay(){
  const i = Math.max(0, Math.min(state.idx, DAYS.length-1));
  state.idx = i;
  const day = DAYS[i];
  $('#dayTitle').textContent = `Day ${i+1} of ${DAYS.length} ‚Äî ${day.title}`;

  day.sessions.forEach((s, j)=>{
    const E = els.s[j];
    E.t.textContent = s.title;
    E.slot.textContent = `${s.slot} ‚Ä¢ ${s.tag ? s.tag : ''}`;
    E.d.textContent = s.desc;
    E.learned.textContent = s.learned;
    E.did.textContent = s.did;
    E.aws.textContent = s.aws;
    E.bullet.textContent = s.resume;
    const key = `${i}.${j}`;
    E.check.classList.toggle('done', !!state.done[key]);
    E.links.innerHTML = '';
    (s.links||[]).forEach(l=>{
      const a = document.createElement('a');
      a.href = l.url; a.target = '_blank'; a.rel = 'noopener';
      a.className='tag'; a.textContent = l.label || l.url;
      E.links.appendChild(a);
    });
  });

  setDonut();
}

function toggleSession(j){
  const key = `${state.idx}.${j}`;
  if (state.done[key]) delete state.done[key];
  else {
    state.done[key] = true;
    // streak logic: increase if checked on a new day
    const today = new Date().toDateString();
    if (!state.last || new Date(state.last).toDateString() !== today){
      state.streak = (state.streak||0) + 1;
      state.last = Date.now();
    }
  }
  $('#streak').textContent = state.streak || 0;
  save(); renderDay();
}

/* ---------- Events ---------- */
els.s[0].check.addEventListener('click', ()=>toggleSession(0));
els.s[1].check.addEventListener('click', ()=>toggleSession(1));
$('#prev').addEventListener('click', ()=>{ state.idx=Math.max(0,state.idx-1); save(); renderDay(); });
$('#next').addEventListener('click', ()=>{ state.idx=Math.min(DAYS.length-1,state.idx+1); save(); renderDay(); });

document.addEventListener('click', (e)=>{
  const btn = e.target.closest('button[data-copy]');
  if (!btn) return;
  const id = btn.getAttribute('data-copy');
  const text = document.getElementById(id+'_bullet').textContent.trim();
  navigator.clipboard?.writeText(text).then(()=>{ btn.textContent='Copied!'; setTimeout(()=>btn.textContent='Copy Resume Bullet',1500) });
});

$('#enableAlerts').addEventListener('click', async ()=>{
  try{
    if (!('Notification' in window)) return alert('Notifications not supported in this browser.');
    const p = await Notification.requestPermission();
    if (p==='granted') new Notification('HTML Mastery', { body:'Daily reminders enabled!' });
  }catch(e){ console.warn(e); }
});

$('#reset').addEventListener('click', ()=>{
  if (!confirm('Reset all progress?')) return;
  state = { idx:0, done:{}, streak:0, last:null };
  save(); renderDay();
});

/* Mode: Free Study shows day picker */
$('#mode').addEventListener('change', e=>{
  const free = e.target.selectedIndex===1;
  $('#picker').style.display = free ? '' : 'none';
  $('#dayCard').style.display = free ? 'none' : '';
});
function buildPicker(){
  els.grid.innerHTML='';
  for(let i=0;i<DAYS.length;i++){
    const d = document.createElement('button');
    d.className='btn'; d.textContent = `Day ${i+1}`;
    d.style.textAlign='center';
    d.addEventListener('click', ()=>{ state.idx=i; save(); $('#mode').selectedIndex=0; $('#picker').style.display='none'; $('#dayCard').style.display=''; renderDay(); });
    els.grid.appendChild(d);
  }
}

/* ---------- Init ---------- */
$('#streak').textContent = state.streak || 0;
buildPicker();
renderDay();
</script>

<!-- Debug / Installer block -->
<button id="installBtn" style="display:none;margin-top:12px">Install App</button>
<div id="installHelp" style="display:none;margin-top:10px;padding:10px;border:1px solid #d5dde8;border-radius:8px;background:#f6f9ff;color:#1f2937">
  <strong>Install HTML Mastery:</strong>
  <div id="helpSteps" style="margin-top:6px;font-size:14px;line-height:1.4"></div>
</div>

<script>
(() => {
  // 0) Don‚Äôt break if this block is added twice
  if (window.__HM_INSTALL_WIRED__) return; 
  window.__HM_INSTALL_WIRED__ = true;

  const log = (...a)=>console.log('[InstallDebug]', ...a);
  const installBtn = document.getElementById('installBtn');
  const help = document.getElementById('installHelp');
  const helpSteps = document.getElementById('helpSteps');
  let deferredPrompt = null;

  // 1) Listen for BIP
  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = 'inline-block';
    help.style.display = 'none';
    log('beforeinstallprompt fired ‚úÖ');
  });

  // 2) Click handler
  installBtn.addEventListener('click', async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    log('userChoice:', outcome);
    if (outcome !== 'accepted') {
      // user dismissed; keep button visible
      return;
    }
    deferredPrompt = null;
    installBtn.style.display = 'none';
  });

  // 3) App installed -> hide button
  window.addEventListener('appinstalled', () => {
    log('appinstalled');
    installBtn.style.display = 'none';
    help.style.display = 'none';
  });

  // 4) Full diagnostics
  (async () => {
    const out = {};
    out.page = location.href;
    out.displayModeStandalone = window.matchMedia('(display-mode: standalone)').matches;
    out.navigatorStandalone = window.navigator.standalone === true; // iOS
    out.swSupported = 'serviceWorker' in navigator;
    out.swController = !!(navigator.serviceWorker && navigator.serviceWorker.controller);
    out.swScope = (await navigator.serviceWorker?.getRegistration())?.scope || '(no reg)';
    const link = document.querySelector('link[rel="manifest"]');
    out.manifestLink = link ? new URL(link.getAttribute('href'), location.href).href : '(none)';

    if (out.manifestLink && out.manifestLink !== '(none)') {
      try {
        const r = await fetch(out.manifestLink, { cache:'no-store' });
        out.manifestFetch = { ok:r.ok, status:r.status, url:r.url };
        const m = r.ok ? await r.json() : null;
        out.manifest = m;
        // Icon checks
        if (m && m.icons) {
          out.iconChecks = await Promise.all(m.icons.map(async i => {
            const u = new URL(i.src, out.manifestLink).href;
            try {
              const rr = await fetch(u, { cache:'no-store' });
              return { url:u, ok:rr.ok, status:rr.status, sizes:i.sizes };
            } catch(e) {
              return { url:u, ok:false, error:String(e) };
            }
          }));
        }
        // Scope sanity for GH Pages
        const expected = m?.scope || '';
        out.scopeOK = expected ? location.pathname.startsWith(new URL(expected, out.manifestLink).pathname) : false;
      } catch (e) {
        out.manifestFetch = { ok:false, error:String(e) };
      }
    }
    log('diag:', out);

    // 5) If already installed or in standalone, BIP won‚Äôt fire
    if (out.displayModeStandalone || out.navigatorStandalone) {
      log('Already in standalone; install prompt will not fire.');
      return;
    }

    // 6) After a short grace period, if no BIP -> show fallback help
    setTimeout(() => {
      if (!deferredPrompt && !installBtn.offsetParent) {
        // Explain how to install manually
        help.style.display = 'block';
        const ua = navigator.userAgent.toLowerCase();
        if (/iphone|ipad|ipod/.test(ua)) {
          helpSteps.innerHTML =
            `Open in Safari ‚Üí Share (‚ñ°‚Üë) ‚Üí <strong>Add to Home Screen</strong>.`;
        } else if (/android/.test(ua)) {
          helpSteps.innerHTML =
            `In Chrome: Menu (‚ãÆ) ‚Üí <strong>Install app</strong>.`;
        } else {
          helpSteps.innerHTML =
            `In Chrome/Edge: check the <strong>Install</strong> icon in the address bar, or Menu ‚Üí <strong>Install</strong>.`;
        }
        log('BIP not fired; showing manual install helper.');
      }
    }, 2000);
  })();
})();
</script>
</body>
</html>
